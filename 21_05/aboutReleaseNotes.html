<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html data-context="About" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>Release Notes  - Legato Docs</title>
<meta content="legatoâ„¢ is an open source Linux-based embedded platform designed to simplify connected IoT application development" name="description"/>
<meta content="legato, iot" name="keywords"/>
<meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<meta content="21.05.0" name="legato-version"/>
<link href="resources/images/legato.ico" rel="shortcut icon"/>
<link href="resources/images/legato.ico" rel="icon" type="image/x-icon"/>
<link href="resources/images/legato.ico" rel="shortcut icon" type="image/x-icon"/>
<link href="resources/images/legato.ico" rel="apple-touch-icon" type="image/x-icon"/>
<link href="resources/css/style.css" media="screen" rel="stylesheet" type="text/css"/>
<link href="resources/css/font-awesome.css" rel="stylesheet" type="text/css"/>
<!--[if IE]>
    <script src="resources/js/html5shiv.js"></script>
    <script src="resources/js/respond.js"></script>
  <![endif]-->
<script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
<script src="resources/js/main.js"></script>
<script src="tocs/About_Release_Notes.json"></script>
</head>
<body>
<noscript>
<input class="modal-closing-trick" id="modal-closing-trick" type="checkbox"/>
<div id="nojs">
<label for="modal-closing-trick">
<span>You seem to not have Javascript <a href="http://enable-javascript.com">enabled</a>, so site functionality like the search and navigation tree won't work.</span>
</label>
</div>
</noscript>
<div class="wrapper">
<div class="fa fa-bars documentation" id="menu-trigger"></div>
<div id="top">
<header>
<nav>
<a class="navlink" href="/">Introduction</a><a class="navlink" href="buildAppsMain.html">Build Apps</a><a class="navlink" href="buildPlatformMain.html">Build Platform</a><a class="navlink selected" href="aboutMain.html">About</a>
</nav>
</header>
</div>
<div class="white" id="menudocumentation">
<header>
<a href="/"> <img alt="Back to Legato Homepage" id="logo" src="resources/images/legato_logo.png"/></a>
<h2>/ About</h2>
<nav class="secondary">
<a href="aboutLegato.html">Legato</a><a href="aboutSupport.html">LTS Releases and Support Policy</a><a class="link-selected" href="aboutReleaseNotes.html">Release Notes</a><a href="aboutLicenses.html">Licenses</a><a href="aboutLegatoContributing.html">Contribute Code</a>
</nav>
<nav class="ui-front">
<i class="fa fa-search" id="search-icon"></i>
<input id="searchbox" placeholder="Search"/>
</nav>
</header>
</div>
<div id="resizable">
<div id="left">
<div id="tree1"></div>
</div>
</div>
<div class="content">
<div class="header">
<div class="headertitle">
<h1 class="title">Release Notes </h1> </div>
</div><div class="contents">
<div class="textblock"><p>Version: <b>Legato 21.05.0</b><br/>
 Date: <b>December 22, 2021</b><br/>
<a class="el" href="aboutLicenses.html">Legato Application Framework Licensing Information</a></p>
<p>Visit the <a href="https://legato.io/releases">release page</a> to <b>download</b> the tarball, <b>clone</b> the repositories from GitHub, or view <b>previous released versions</b>.</p>
<p>Get started with the latest version of Legato by installing the SDK through <a class="el" href="confLeaf.html">Leaf</a>.</p>
<p>Setup the beta version for your target using wp77xx or fx30-catm: </p><pre class="fragment">$ leaf setup <profile name> -p swi-wp77_6.0.0.beta

OR 

$ leaf setup <profile name> -p swi-fx30-catm_4.0.0.beta
</pre><p>Update your profile to the latest version: </p><pre class="fragment">$ leaf update
</pre><dl class="section note"><dt>Note</dt><dd>The 21.05 release branch utilizes the Linux 4.14 kernel and is not backwards compatible with the 19.11 release branch or previous releases.</dd><dd>Currently Leaf only contains the two mentioned Beta SDK's for wp77 and fx30-catm (swi-wp77_6.0.0.beta, swi-fx30-catm_4.0.0.beta) which support Legato 21.05.</dd></dl>
<h1><a class="anchor" id="rn2105_Features"></a>
New Features</h1>
<p>List of new features in the 21.05.0 Release:</p>
<h2><a class="anchor" id="rn2105_SMACK_OnlyCap_support"></a>
New SMACK onlycap Features for Kernel 4.14</h2>
<ul>
<li>SMACK rules have been updated for some daemons, such as "modemService" to have write access to "admin".</li>
<li>smack_SetOnlyCap() has been fixed to allow for unsetting of ONLYCAP using "-".</li>
<li>smack_isMounted() API has been added to check if a file system is mounted.</li>
<li>smack_IsOnlyCapSet() API has been added to check if onlycap is set.</li>
<li>Bidirectional write permissions has been given to atService() and atQmiLinker(), so that AVC can successfully run on kernel 4.14.</li>
<li>For le_fs() API, the backend storage uses /tmp/data/le_fs/ when /data/le_fs is not available.</li>
<li>Socket permission errors leading to a reboot loop on kernel 4.14 on virtual platform has been resolved.</li>
<li>Failure to modify permissions on SMACK label directory for SMACK OnlyCap install has been fixed.</li>
</ul>
<h2><a class="anchor" id="rn2105_Features_IoTKeyStore"></a>
New IoT KeyStore Features</h2>
<dl class="section note"><dt>Note</dt><dd>IoT Keystore has been disabled by default in the generic Legato release and has been enabled by default on the WP release which works on specific Sierra Wireless hardware.</dd></dl>
<ul>
<li>IoT Keystore is available on WP76 and FX30 starting with Release 17, and WP77 and FX30 starting with Release 15.</li>
<li>Security features TrustZone4 and IoT KeyStore have been implemented. Secure data migration has been automatically applied when upgrading from an older version of the TrustZone4 to the latest version in kernel 4.14.</li>
<li>IoT Keystore access has been integrated into Legato's secure storage app. By default, it is disabled in the Legato build. This can be enabled using configs "SECSTORE_IKS_BACKEND" and "ENABLE_IOT_KEYSTORE_API". Please note that the build of IoT Keystore uses proprietary libraries that require the user to be signed in.</li>
<li>Legato APIs have been created to access the IoT Keystore library. They will perform cryptographic key management and encryption/decryption routines. Additionally a platform adapter component to separate access to the library into a platform-specific layer has been added. Also, key namespaces between applications have been added, to prevent an application from accessing another app's encrypted data.</li>
<li>Legato IoT Keystore performance has been optimized, by adding a map to reduce the frequency of calling pa_secStore_GetSize().</li>
<li>IoT Keystore storage has added access protection access. Only privileged system daemon qseecom will be able to access storage. Secure storage app will indirectly access IoT Keystore storage via this daemon.</li>
</ul>
<h2><a class="anchor" id="rn2105_AVC_Features"></a>
New AVC Features</h2>
<ul>
<li>Bootstrap rollback mechanism has been improved to manage more error cases. Logic has been moved to another layer of AVC.</li>
<li>Improvements have been made to lwm2mcore_CredentialMatch() API which include credential length comparison and using memcmp for comparison.</li>
</ul>
<h2><a class="anchor" id="rn2105_Octave_Features"></a>
New Octave Upstreaming Features</h2>
<ul>
<li>A set of Octave product-layer patches have been ported to Legato code base.</li>
<li>DTLS_NAT_TIMEOUT has been added to be configurable using the <a class="el" href="group__le__avc.html#ga123e82469ba1d2eac654cce8ace50d6a">le_avc_SetNatTimeout()</a> API.</li>
<li>lwm2mcore_SetNatTimeout() API has been added to allow the NAT timeout to be set in LwM2MCore.</li>
<li>dhub utility has been modified to allow it to perform a data push from a local file.</li>
<li>Following API functions have been created: <ul>
<li>admin_CreateInput() - Create an input resource, which is used to push data into the Data Hub. </li>
<li>admin_CreateOutput() - Create an output resource, which is used to receive data output from Data Hub. </li>
<li>admin_DeleteResource() - Delete a resource. </li>
<li>admin_SetJsonExample() - Set the example value for a JSON-type Input resource. </li>
<li>admin_MarkOptional() - Mark an Output resource "optional". (By default, they are marked "mandatory").</li>
</ul>
</li>
<li>A new API le_coap_GetLastErrorCode() has been added to get last CoAP error code of last push.</li>
<li>A new CoAP error has been added: CODE_429_Too_Many_Requests.</li>
<li>A new CoAP push status has been added: LE_COAP_PUSH_TIMEOUT.</li>
</ul>
<h2><a class="anchor" id="rn2105_FX30_Features"></a>
New FX30 Upstreaming Features</h2>
<ul>
<li>Version information has been added in the SDEF file and has been appended to the output of "fwupdate query" and "cm info".</li>
<li>FX30 patch has been modified to disable the module from switching to the sim's default APN.</li>
<li>A tags section has been added that will allow users to specify key-value pairs on a per application basis in the adef file. This section will be used for the "disableAirVantageManagement" variable and can be expanded with other variables specified by the client.</li>
</ul>
<h2><a class="anchor" id="rn2105_mbedtls_Features"></a>
New mbedtls Features</h2>
<ul>
<li>mbedtls version updated from 2.16.3 to 2.16.8.</li>
</ul>
<h2><a class="anchor" id="rn2105_Secure_Storage_Features"></a>
New Secure Storage Features</h2>
<ul>
<li>Support has been added to delete all contents from secure storage of an app.</li>
</ul>
<h2><a class="anchor" id="rn2105_lwm2m_Features"></a>
New lwm2m Features</h2>
<ul>
<li>Piggybacked response on RX stream has been improved.</li>
<li>Token generation has been added for le_coap_Push() if provided token length is 0.</li>
</ul>
<h2><a class="anchor" id="rn2105_deftools_Features"></a>
New deftools Features</h2>
<ul>
<li>A report mode has been added to ifgen which takes an API file and displays the memory required for each message buffer, as well as how much data is needed by each function and handler.</li>
<li>Check has been added to internal server type to generate internal bindings correctly. App modeller now will recognize executables as binary bundles and will allow use of any components within the executable.</li>
</ul>
<h2><a class="anchor" id="rn2105_kernel414_Features"></a>
New Kernel 4.14 Features</h2>
<ul>
<li>Allowed for new UART names in kernel 4.14.</li>
<li>Enhanced configEcm to also work with configfs gadgets.</li>
<li>TI wifi driver has been integrated to work on kernel 4.14.</li>
</ul>
<h2><a class="anchor" id="rn2105_Misc_Features"></a>
New Miscellaneous Features</h2>
<ul>
<li>When using the script framework/tools/scripts/releaselegato, a new directory is created first before copying the symbolic link.</li>
<li>TCF agent and SFTP server have been removed from DevMode tool set.</li>
<li>cm tool's input has been enhanced for validation of input values, and now rejects back-to-back multiple connects.</li>
<li>cm script update_route has been enhanced to filter for only whole words.</li>
<li>asyncServer and cRelay components have been added to ipcTest.api to fix virt-arm issues.</li>
<li>Default Target to wp77xx in KConfig has been resolved.</li>
<li>Missing libresolv.so.2 library have been added.</li>
<li>pmTool has been enhanced so that users can get all the information about the settings for their GPIOs, ADCs, Timers, Shutdown strategies using <pre class="fragment">pmtool bootOn status [gpio &lt;gpioNum&gt;] [adc &lt;adcNum&gt;] &lt;timer&gt; &lt;shutdown&gt;
</pre></li>
</ul>
<h1><a class="anchor" id="rn2105_BFeatures"></a>
Beta Features</h1>
<p>None</p>
<h1><a class="anchor" id="rn2105_AFeatures"></a>
Alpha Features</h1>
<p>None</p>
<h1><a class="anchor" id="rn2105_Fixes"></a>
Fixed Issues</h1>
<p>All changes are tagged in GitHub as "21.05.0". The full list of changes and commit messages can be found on GitHub.</p>
<ul>
<li><a href="https://github.com/legatoproject/legato-af/commits/21.05-release">Legato Application Framework 21.05.0 Fixes</a></li>
<li><a href="https://github.com/legatoproject/legato-WiFi/commits/21.05-release">Legato WiFi 21.05.0 Fixes</a></li>
<li><a href="https://github.com/legatoproject/legato-Service-AirVantageConnector/commits/21.05-release">Legato AirVantage Connector 21.05.0 Fixes</a></li>
<li><a href="https://github.com/legatoproject/legato-Service-DataHub/commits/21.05-release">Legato DataHub 21.05.0 Fixes</a></li>
</ul>
<dl class="section note"><dt>Note</dt><dd>This is only the list of fixes for the Application Framework and Platform Services, for the list of changes in the Platform Adapter view the commits under the tag 21.05.0 in individual repositories on GitHub.</dd></dl>
<h1><a class="anchor" id="rn2105_KnownIssues"></a>
Known Issues</h1>
<h2><a class="anchor" id="rn2105_Constraints"></a>
Constraints and Limitations</h2>
<h3><a class="anchor" id="rn2105_ConstraintsLeImageUpdate"></a>
Legato Image Update</h3>
<dl class="section warning"><dt>Warning</dt><dd>Legato image has to be upgraded or downgraded via a bundle across an image incompatibility boundary described below.</dd></dl>
<p>In the Legato upgrade from: pre-21.05.0 versions (e.g. 20.08.0) to 21.05.0+, an image incompatibility boundary has been introduced. This is due to the included Kernel update from version 3.18 to 4.14.</p>
<p>In the Legato upgrade from pre-20.08.0 versions (e.g. 20.04.0) to 20.08.0+, an image incompatibility boundary has been introduced. This is due to the included Yocto update from version 2.5 to 3.0 in which are different libssl versions.</p>
<p>Whenever the Legato image is upgraded or downgraded across these boundary line, it has to be done together with its corresponding LXSWI image in a bundle. Otherwise, Legato would not run and not take any image update to recover.</p>
<h3><a class="anchor" id="rn2105_ConstraintsLinuxSupport"></a>
Dev Machine Linux Version</h3>
<p>To develop applications within the Legato Application Framework, a current supported <a href="https://ubuntu.com/about/release-cycle">Long Term Support version of Ubuntu Linux</a> is required on your dev machine (or running in a virtual box on Windows). Ubuntu 18.04 is the current <b>recommended</b> version to use on your dev machine.</p>
<h3><a class="anchor" id="rn2105_ConstECMUSB"></a>
ECM-USB modem manager issue</h3>
<p>Ubuntu 15.10 and newer has Modem Manager version <code>1.4.12-1ubuntu1</code> installed by default which conflicts with the ECM-USB driver when connecting a target. Modem manager may cause the Ubuntu Network Manager to crash on your host and/or your target device to become unavailable over USB.</p>
<p><b>Symptoms:</b> </p><ul>
<li>NetworkManager crashing when plugging into your device over USB, or</li>
<li>The target device becomes inaccessible after 30 seconds.</li>
</ul>
<p><b>Recommended</b> <b>Work</b> <b>Around:</b> </p><ul>
<li>Uninstall <code>modemmanager</code> from Ubuntu or</li>
<li><a href="http://packages.ubuntu.com/trusty/modemmanager">Downgrade <code>modemmanager</code> to version 1.0.0-2ubuntu1</a></li>
</ul>
<h3><a class="anchor" id="rn2105_ConstTrust"></a>
FOTA upgrade warning</h3>
<p>A device that has trustzones enabled, may re-bootstrap (obtain new keys from the AirVantage server) during a FOTA (firmware over-the-air) upgrade.</p>
<p class="copyright">Copyright (C) Sierra Wireless Inc. </p>
</div></div>
<br clear="left"/>
</div>
</div>
<link href="resources/css/jqtree.css" rel="stylesheet" type="text/css"/>
<script src="resources/js/tree.jquery.js" type="text/javascript"></script>
<script src="resources/js/jquery.cookie.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<link href="resources/css/perfect-scrollbar.min.css" rel="stylesheet"/>
<script src="resources/js/perfect-scrollbar.jquery.min.js"></script>
</body>
</html>
