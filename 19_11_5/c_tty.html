<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html data-context="Build Apps" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>tty API  - Legato Docs</title>
<meta content="legatoâ„¢ is an open source Linux-based embedded platform designed to simplify connected IoT application development" name="description"/>
<meta content="legato, iot" name="keywords"/>
<meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<meta content="19.11.5" name="legato-version"/>
<link href="resources/images/legato.ico" rel="shortcut icon"/>
<link href="resources/images/legato.ico" rel="icon" type="image/x-icon"/>
<link href="resources/images/legato.ico" rel="shortcut icon" type="image/x-icon"/>
<link href="resources/images/legato.ico" rel="apple-touch-icon" type="image/x-icon"/>
<link href="resources/css/style.css" media="screen" rel="stylesheet" type="text/css"/>
<link href="resources/css/font-awesome.css" rel="stylesheet" type="text/css"/>
<!--[if IE]>
    <script src="resources/js/html5shiv.js"></script>
    <script src="resources/js/respond.js"></script>
  <![endif]-->
<script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
<script src="resources/js/main.js"></script>
<script src="tocs/Build_Apps_API_Guides.json"></script>
</head>
<body>
<noscript>
<input class="modal-closing-trick" id="modal-closing-trick" type="checkbox"/>
<div id="nojs">
<label for="modal-closing-trick">
<span>You seem to not have Javascript <a href="http://enable-javascript.com">enabled</a>, so site functionality like the search and navigation tree won't work.</span>
</label>
</div>
</noscript>
<div class="wrapper">
<div class="fa fa-bars documentation" id="menu-trigger"></div>
<div id="top">
<header>
<nav>
<a class="navlink" href="/">Introduction</a><a class="navlink selected" href="buildAppsMain.html">Build Apps</a><a class="navlink" href="buildPlatformMain.html">Build Platform</a><a class="navlink" href="aboutMain.html">About</a>
</nav>
</header>
</div>
<div class="white" id="menudocumentation">
<header>
<a href="/"> <img alt="Back to Legato Homepage" id="logo" src="resources/images/legato_logo.png"/></a>
<h2>/ Build Apps</h2>
<nav class="secondary">
<a href="getStarted.html">Get Started</a><a href="concepts.html">Concepts</a><a class="link-selected" href="apiGuidesMain.html">API Guides</a><a href="tools.html">Tools</a><a href="howToMain.html">How To</a><a href="experimentalMain.html">Experimental Features</a>
</nav>
<nav class="ui-front">
<i class="fa fa-search" id="search-icon"></i>
<input id="searchbox" placeholder="Search"/>
</nav>
</header>
</div>
<div id="resizable">
<div id="left">
<div id="tree1"></div>
</div>
</div>
<div class="content">
<div class="header">
<div class="headertitle">
<h1 class="title">tty API </h1> </div>
</div><div class="contents">
<div class="textblock"><p><a class="el" href="le__tty_8h.html">API Reference</a></p>
<hr/>
<p>This API provides routines to configure serial ports.</p>
<h1><a class="anchor" id="c_tty_open_close"></a>
Open/Close serial ports</h1>
<ul>
<li><code><a class="el" href="le__tty_8h.html#a93c3ad951903478014a91c721319951b">le_tty_Open()</a></code> opens a serial port device and locks it for exclusive use.</li>
</ul>
<pre class="fragment"><div class="line">fd = <a class="code" href="le__tty_8h.html#a93c3ad951903478014a91c721319951b">le_tty_Open</a>(<span class="stringliteral">"/dev/ttyS0"</span>, O_RDWR | O_NOCTTY | O_NDELAY);</div></pre><!-- fragment --><ul>
<li><code><a class="el" href="le__tty_8h.html#a8e888c890956de70c594d26405133b98">le_tty_Close()</a></code> closes and unlocks a serial port file descriptor.</li>
</ul>
<h1><a class="anchor" id="c_tty_settings"></a>
Settings serial ports</h1>
<ul>
<li>Setting baud rate is done with <code><a class="el" href="le__tty_8h.html#a5ade4aa1b77c8cd69016695adca64f3c">le_tty_SetBaudRate()</a></code>, value available are listed by #tty_Speed_t</li>
<li>Getting baud rate is done with <code><a class="el" href="le__tty_8h.html#a786626ed11391263f89e120b1b4de18c">le_tty_GetBaudRate()</a></code>. when <a class="el" href="le__tty_8h.html#a5ade4aa1b77c8cd69016695adca64f3c">le_tty_SetBaudRate()</a> failed with LE_UNSUPPORTED, use <code><a class="el" href="le__tty_8h.html#a786626ed11391263f89e120b1b4de18c">le_tty_GetBaudRate()</a></code> to retrieve the real value sets by the driver.</li>
<li>Setting framing on serial port is done with <code><a class="el" href="le__tty_8h.html#af33173f45f89a5a17b47add063a2ad46">le_tty_SetFraming()</a></code>. Parity value can be :<ul>
<li>"N" for No parity</li>
<li>"O" for Odd parity</li>
<li>"E" for Even parity</li>
</ul>
</li>
<li>Setting flow control on serial port is done with <code><a class="el" href="le__tty_8h.html#a331cdf5d19135a4c4fc1ba8b3c3acf2a">le_tty_SetFlowControl()</a></code>. Flow control options are:<ul>
<li>LE_TTY_FLOW_CONTROL_NONE - flow control disabled</li>
<li>LE_TTY_FLOW_CONTROL_XON_XOFF - software flow control (XON/XOFF)</li>
<li>LE_TTY_FLOW_CONTROL_HARDWARE - hardware flow control (RTS/CTS)</li>
</ul>
</li>
<li>Setting serial port into terminal mode is done with <code><a class="el" href="le__tty_8h.html#a78cfc2ae600bca28eb48e8b40ccee358">le_tty_SetCanonical()</a></code>. it converts EOL characters to unix format, enables local echo, line mode.</li>
<li><p class="startli">Setting serial port into raw (non-canonical) mode is done with <code><a class="el" href="le__tty_8h.html#a7eae0319f1c4a064c8667f38610e059a">le_tty_SetRaw()</a></code>. it disables conversion of EOL characters, disables local echo, sets character mode, read timeouts.</p>
<p class="startli">Different use cases for numChars and timeout parameters in <code><a class="el" href="le__tty_8h.html#a7eae0319f1c4a064c8667f38610e059a">le_tty_SetRaw(int fd,int numChars,int timeout)</a></code> </p><ul>
<li>numChars = 0 and timeout = 0: Read will be completetly non-blocking.</li>
<li>numChars = 0 and timeout &gt; 0: Read will be a pure timed read. If the timer expires without data, zero is returned.</li>
<li>numChars &gt; 0 and timeout &gt; 0: Read will return when numChar have been transferred to the caller's buffer or when timeout expire between characters.</li>
<li>numChars &gt; 0 and timeout = 0: Read will return only when exactly numChars have been transferred to the caller's buffer. This can wait and block indefinitely, when read(fd,buffer,nbytes) is performed and that nbytes is smaller than the numChars setted.</li>
</ul>
</li>
</ul>
<p>To switch between 'cannonical' and 'raw' mode, just call <code><a class="el" href="le__tty_8h.html#a78cfc2ae600bca28eb48e8b40ccee358">le_tty_SetCanonical()</a></code> and <code><a class="el" href="le__tty_8h.html#a7eae0319f1c4a064c8667f38610e059a">le_tty_SetRaw()</a></code> respectively</p>
<hr/>
<p class="copyright">Copyright (C) Sierra Wireless Inc. </p>
</div></div>
<br clear="left"/>
</div>
</div>
<link href="resources/css/jqtree.css" rel="stylesheet" type="text/css"/>
<script src="resources/js/tree.jquery.js" type="text/javascript"></script>
<script src="resources/js/jquery.cookie.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<link href="resources/css/perfect-scrollbar.min.css" rel="stylesheet"/>
<script src="resources/js/perfect-scrollbar.jquery.min.js"></script>
</body>
</html>
