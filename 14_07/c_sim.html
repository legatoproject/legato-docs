<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Legato: SIM Services</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="fonts.css" rel="stylesheet" type="text/css" />
<link href="legato.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="jquery.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link rel="icon" type="image/png" href="favicon.ico" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo">
    <img alt="Logo" src="legatoLogo.png"/>
    <div id="projectbrief">Simplifying M2M development</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('c_sim.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">SIM Services </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="le__sim__interface_8h.html">Click here for the API reference documentation.</a></p>
<hr/>
<p>This file contains prototype definitions for high level SIM APIs.</p>
<p><a class="el" href="c_sim.html#le_sim_count">Counting the SIM card slots</a> <br/>
 <a class="el" href="c_sim.html#le_sim_create">Creating a SIM object</a> <br/>
 <a class="el" href="c_sim.html#le_sim_delete">Deleting a SIM object</a> <br/>
 <a class="el" href="c_sim.html#le_sim_id">SIM identification information</a> <br/>
 <a class="el" href="c_sim.html#le_sim_auth">SIM Authentication</a> <br/>
 <a class="el" href="c_sim.html#le_sim_state">SIM states</a> <br/>
</p>
<p>A subscriber identity module or subscriber identification module (SIM) is an integrated circuit that securely stores the international mobile subscriber identity (IMSI) and related key used to identify and authenticate subscribers on M2M devices.</p>
<p>Most SIM cards can store a number of SMS messages and phone book contacts.</p>
<h1><a class="anchor" id="le_sim_count"></a>
Counting the SIM card slots</h1>
<p><code><a class="el" href="le__sim__interface_8h.html#a106e220e84b5aec759b036a171eaed8e">le_sim_CountSlots()</a></code> returns the number of SIM card sockets mounted on the device.</p>
<p><code><a class="el" href="le__sim__interface_8h.html#af61ce2885fb5b0cc60b857abe98dac56">le_sim_GetSelectedCard()</a></code> returns the selected SIM card number.</p>
<h1><a class="anchor" id="le_sim_create"></a>
Creating a SIM object</h1>
<p>You must create a SIM object by calling <a class="el" href="le__sim__interface_8h.html#a96ae7c3ffad698c16d03442dff711155">le_sim_Create()</a> first; the card socket number must be specified with a parameter. This passes the card socket number to create the required corresponding object to the selected SIM card. Resources are automatically allocated for the SIM object, which is referenced by <code>le_sim_ObjRef_t</code> type.</p>
<p>When the SIM object is no longer needed, you must call <code><a class="el" href="le__sim__interface_8h.html#aa06384e5e32d769c1a62ef42a1e6fd43">le_sim_Delete()</a></code> to free all allocated ressources associated with the object.</p>
<h1><a class="anchor" id="le_sim_delete"></a>
Deleting a SIM object</h1>
<p>To delete a SIM object, call <code><a class="el" href="le__sim__interface_8h.html#aa06384e5e32d769c1a62ef42a1e6fd43">le_sim_Delete()</a></code>. This frees all the resources allocated for the SIM object. If several users own the SIM object (e.g., several handler functions registered for new state notifications), the SIM object will only be actually deleted after the last user deletes the SIM object.</p>
<h1><a class="anchor" id="le_sim_id"></a>
SIM identification information</h1>
<p><b>ICCID:</b> Each SIM is internationally identified by its integrated circuit card identifier (ICCID). ICCIDs are stored in the SIM cards and engraved or printed on the SIM card body. The ICCID is defined by the ITU-T recommendation E.118 as the Primary Account Number. According to E.118, the number is up to 19 digits long, including a single check digit calculated using the Luhn algorithm. However, the GSM Phase 1 (ETSI Recommendation GSM 11.11) defined the ICCID length as 10 octets (20 digits) with operator-specific structure.</p>
<p><code><a class="el" href="le__sim__interface_8h.html#a1b3bb0c7ce251237cc7abf1b1a169f4f">le_sim_GetICCID()</a></code> API reads the identification number (ICCID).</p>
<p><b>IMSI:</b> The International Mobile Subscriber Identity or IMSI is a unique identification associated with all cellular networks. The IMSI is used in any mobile network that connects with other networks. For GSM, UMTS and LTE network, this number is provisioned in the SIM card.</p>
<p>An IMSI is usually presented as a 15 digit long number, but can be shorter. The first 3 digits are the mobile country code (MCC), are followed by the mobile network code (MNC), either 2 digits (European standard) or 3 digits (North American standard). The length of the MNC depends on the value of the MCC. The remaining digits are the mobile subscription identification number (MSIN) within the network's customer base.</p>
<p><code><a class="el" href="le__sim__interface_8h.html#a44cea593963c4c8b7a2c0be753737d06">le_sim_GetIMSI()</a></code> API reads the international mobile subscriber identity (IMSI).</p>
<p><b>Phone</b> <b>Number:</b> <code><a class="el" href="le__sim__interface_8h.html#a47d9f838829fcb16da2eec0f4cc81f92">le_sim_GetSubscriberPhoneNumber()</a></code> API reads the Phone Number associated to the SIM. If the phone number has not been provisioned, it will return the empty string.</p>
<h1><a class="anchor" id="le_sim_auth"></a>
SIM Authentication</h1>
<p><code><a class="el" href="le__sim__interface_8h.html#a0ffb109740d942cf4a871dbd2adc479f">le_sim_EnterPIN()</a></code> enters the PIN (Personal Identification Number) code that's required before any Mobile equipment functionality can be used.</p>
<p><code><a class="el" href="le__sim__interface_8h.html#a84a634fa664d51a6d35eb839bcdc4e8c">le_sim_GetRemainingPINTries()</a></code> returns the number of remaining PIN entry attempts before the SIM will become blocked.</p>
<p><code><a class="el" href="le__sim__interface_8h.html#a25b4180ddc334e9ce4b95edc697223f3">le_sim_ChangePIN()</a></code> must be called to change the PIN code.</p>
<p><code><a class="el" href="le__sim__interface_8h.html#a4fc5c00efaab78fa594cc028b22a0e30">le_sim_Lock()</a></code> locks the SIM card: it enables requests for the PIN code.</p>
<p><code><a class="el" href="le__sim__interface_8h.html#a05d93f5cbd322e578db729b4f9c595d9">le_sim_Unlock()</a></code> unlocks the SIM card: it disables requests for the PIN code.</p>
<p><code><a class="el" href="le__sim__interface_8h.html#af8691999f72761dd36eb5c4334db1c45">le_sim_Unblock()</a></code> unblocks the SIM card. The SIM card is blocked after X unsuccessful attempts to enter the PIN. <code><a class="el" href="le__sim__interface_8h.html#af8691999f72761dd36eb5c4334db1c45">le_sim_Unblock()</a></code> requires the PUK (Personal Unblocking) code to set a new PIN code.</p>
<h1><a class="anchor" id="le_sim_state"></a>
SIM states</h1>
<p><code><a class="el" href="le__sim__interface_8h.html#a1ad9cdf49b2e6e905d09c32bdb59a0e7">le_sim_IsPresent()</a></code> API advises the SIM is inserted (and locked) or removed.</p>
<p><code><a class="el" href="le__sim__interface_8h.html#a6b15a8fb698f7cf10649173ef9735f5f">le_sim_IsReady()</a></code> API advises the SIM is ready (PIN code correctly entered or not required).</p>
<p>The <a class="el" href="le__sim__interface_8h.html#a284e5a087bfb09b3453b9b3f388e24bd">le_sim_GetState()</a> API retrieves the SIM state:</p>
<ul>
<li>LE_SIM_INSERTED : SIM card is inserted and locked.</li>
<li>LE_SIM_ABSENT : SIM card is absent.</li>
<li>LE_SIM_READY : SIM card is inserted and unlocked.</li>
<li>LE_SIM_BLOCKED : SIM card is blocked.</li>
<li>LE_SIM_BUSY : SIM card is busy.</li>
<li>LE_SIM_STATE_UNKNOWN : Unknown SIM state.</li>
</ul>
<p>A handler function must be registered to receive SIM's state notifications. <code><a class="el" href="le__sim__interface_8h.html#a8e296a7cd35edd99cb1dc21232e280dd">le_sim_AddNewStateHandler()</a></code> API allows the User to register that handler.</p>
<p>The handler must satisfy the following prototype: typedef void(*le_sim_NewStateHandlerFunc_t)(le_sim_ObjRef_t sim);</p>
<p>When a new SIM's state is notified, a SIM object is automatically created and the handler is called.</p>
<p>Call <code><a class="el" href="le__sim__interface_8h.html#a284e5a087bfb09b3453b9b3f388e24bd">le_sim_GetState()</a></code> to retrieve the new state of the SIM.</p>
<dl class="section note"><dt>Note</dt><dd>If two (or more) applications have registered a handler function for notifications, they will all receive it and will be passed the same SIM object reference.</dd></dl>
<p>The application can uninstall the handler function by calling <code><a class="el" href="le__sim__interface_8h.html#a8e3a4e2e978cf4931a39317ee5e9f762">le_sim_RemoveNewStateHandler()</a></code> API. </p>
<dl class="section note"><dt>Note</dt><dd><code><a class="el" href="le__sim__interface_8h.html#a8e3a4e2e978cf4931a39317ee5e9f762">le_sim_RemoveNewStateHandler()</a></code> API does not delete the SIM Object. The caller has to delete it.</dd></dl>
<hr/>
<p>Copyright (C) Sierra Wireless, Inc. 2014. Use of this work is subject to license. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
   <div class="footer">
        <div>
            <a href="https://www.sierrawireless.com/">
                <img src="swi-ico-medium.png" width="24" alt="" />
                &nbsp;Sierra Wireless 2014
            </a>
            &nbsp;-&nbsp;
            Generated by Doxygen 1.8.6
        </div>
    </div>
</body>
</html>
