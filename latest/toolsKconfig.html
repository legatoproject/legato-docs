<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html data-context="Build Apps" xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
<title>KConfig  - Legato Docs</title>
<meta content="legatoâ„¢ is an open source Linux-based embedded platform designed to simplify connected IoT application development" name="description"/>
<meta content="legato, iot" name="keywords"/>
<meta content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport"/>
<meta content="20.08.0" name="legato-version"/>
<link href="resources/images/legato.ico" rel="shortcut icon"/>
<link href="resources/images/legato.ico" rel="icon" type="image/x-icon"/>
<link href="resources/images/legato.ico" rel="shortcut icon" type="image/x-icon"/>
<link href="resources/images/legato.ico" rel="apple-touch-icon" type="image/x-icon"/>
<link href="resources/css/style.css" media="screen" rel="stylesheet" type="text/css"/>
<link href="resources/css/font-awesome.css" rel="stylesheet" type="text/css"/>
<!--[if IE]>
    <script src="resources/js/html5shiv.js"></script>
    <script src="resources/js/respond.js"></script>
  <![endif]-->
<script src="https://code.jquery.com/jquery-2.2.3.min.js"></script>
<script src="resources/js/main.js"></script>
<script src="tocs/Build_Apps_Tools.json"></script>
</head>
<body>
<noscript>
<input class="modal-closing-trick" id="modal-closing-trick" type="checkbox"/>
<div id="nojs">
<label for="modal-closing-trick">
<span>You seem to not have Javascript <a href="http://enable-javascript.com">enabled</a>, so site functionality like the search and navigation tree won't work.</span>
</label>
</div>
</noscript>
<div class="wrapper">
<div class="fa fa-bars documentation" id="menu-trigger"></div>
<div id="top">
<header>
<nav>
<a class="navlink" href="/">Introduction</a><a class="navlink selected" href="buildAppsMain.html">Build Apps</a><a class="navlink" href="buildPlatformMain.html">Build Platform</a><a class="navlink" href="aboutMain.html">About</a>
</nav>
</header>
</div>
<div class="white" id="menudocumentation">
<header>
<a href="/"> <img alt="Back to Legato Homepage" id="logo" src="resources/images/legato_logo.png"/></a>
<h2>/ Build Apps</h2>
<nav class="secondary">
<a href="getStarted.html">Get Started</a><a href="concepts.html">Concepts</a><a href="apiGuidesMain.html">API Guides</a><a class="link-selected" href="tools.html">Tools</a><a href="howToMain.html">How To</a><a href="experimentalMain.html">Experimental Features</a>
</nav>
<nav class="ui-front">
<i class="fa fa-search" id="search-icon"></i>
<input id="searchbox" placeholder="Search"/>
</nav>
</header>
</div>
<div id="resizable">
<div id="left">
<div id="tree1"></div>
</div>
</div>
<div class="content">
<div class="header">
<div class="headertitle">
<h1 class="title">KConfig </h1> </div>
</div><div class="contents">
<div class="textblock"><p>See <a class="el" href="kconfigOptions.html">Legato KConfig Options</a> for the current list of configuration options.</p>
<h1><a class="anchor" id="kconfigDescription_WhatIs"></a>
What is KConfig?</h1>
<p>KConfig is a selection-based configuration system originally developed for the Linux kernel. It is commonly used to select build-time options and to enable or disable features, and has now found use in other projects beyond the Linux kernel.</p>
<p>Most users interact with KConfig via a curses or graphical menu interface, usually invoked by running <code>make menuconfig</code>. In this interface, the user selects the options and features desired, and saves a configuration file, which is then used as an input to the build process.</p>
<p>The menus and configuration options are defined by KConfig files sprinkled throughout the source tree. The format of these files is described in detail at <a href="https://raw.githubusercontent.com/legatoproject/legato-3rdParty-kconfig-frontends/v4.11.0.1/docs/kconfig-language.txt">https://raw.githubusercontent.com/legatoproject/legato-3rdParty-kconfig-frontends/v4.11.0.1/docs/kconfig-language.txt</a></p>
<h1><a class="anchor" id="kconfigDescription_Legato"></a>
What is it used for in Legato?</h1>
<p>In Legato, KConfig provides a unified mechanism for configuring the framework and service builds. This includes target selection, enabling security and diagnosic features, and many others. The full list of options may be found at <a class="el" href="kconfigOptions.html">KConfig Options</a>. KConfig replaces a mixture of environment variables and preprocessor defines which were previously used to set the parameters of the build.</p>
<p>Legato uses <a href="https://github.com/legatoproject/legato-3rdParty-kconfig-frontends">kconfig-frontends</a> to manage KConfig files and configuration. This is a version of the Linux kernel's KConfig system that has been extracted and tweaked for independent use.</p>
<h1><a class="anchor" id="kconfigDescription_HowTo"></a>
How to Configure Legato</h1>
<p>Legato will generate a default configuration if none is explicitly provided, and the default can be later customized.</p>
<h2><a class="anchor" id="kconfigDescription_Defaults"></a>
Defaults</h2>
<p>By default, when Legato is built using <code>make</code> or <code>make &lt;target&gt;</code>, a default configuration file for the target is generated with the name <code>.config.&lt;target&gt;</code>. This file will be populated with appropriate default values for the target, and values taken from the environment if certain environment variables are set. These environment variables are supported for backwards compatibility, and the preferred method of configuration is through the menuconfig mechanism. The following table lists these environment variables and the configuration values that they map to.</p>
<table class="doxtable">
<tr>
<th>Environment Variable </th><th>KConfig Option  </th></tr>
<tr>
<td><code>DEBUG</code> </td><td><a class="el" href="kconfigOptions.html#DEBUG">DEBUG</a> </td></tr>
<tr>
<td><code>DISABLE_SMACK</code> </td><td><a class="el" href="kconfigOptions.html#ENABLE_SMACK">ENABLE_SMACK</a> (inverse value) </td></tr>
<tr>
<td><code>DISABLE_SMACK_ONLYCAP</code> </td><td><a class="el" href="kconfigOptions.html#SMACK_ONLYCAP">SMACK_ONLYCAP</a> (inverse value) </td></tr>
<tr>
<td><code>EJDK_DIR</code> </td><td><a class="el" href="kconfigOptions.html#EJDK_DIR">EJDK_DIR</a> </td></tr>
<tr>
<td><code>ENABLE_IMA</code> </td><td><a class="el" href="kconfigOptions.html#ENABLE_IMA">ENABLE_IMA</a> </td></tr>
<tr>
<td><code>IMA_PRIVATE_KEY</code> </td><td><a class="el" href="kconfigOptions.html#IMA_PRIVATE_KEY">IMA_PRIVATE_KEY</a> </td></tr>
<tr>
<td><code>IMA_PUBLIC_CERT</code> </td><td><a class="el" href="kconfigOptions.html#IMA_PUBLIC_CERT">IMA_PUBLIC_CERT</a> </td></tr>
<tr>
<td><code>IMA_SMACK</code> </td><td><a class="el" href="kconfigOptions.html#IMA_SMACK">IMA_SMACK</a> </td></tr>
<tr>
<td><code>JDK_INCLUDE_DIR</code> </td><td><a class="el" href="kconfigOptions.html#JDK_INCLUDE_DIR">JDK_INCLUDE_DIR</a> </td></tr>
<tr>
<td><code>LE_SVCDIR_CLIENT_SOCKET_NAME</code> </td><td><a class="el" href="kconfigOptions.html#SVCDIR_CLIENT_SOCKET_NAME">SVCDIR_CLIENT_SOCKET_NAME</a> </td></tr>
<tr>
<td><code>LE_SVCDIR_SERVER_SOCKET_NAME</code> </td><td><a class="el" href="kconfigOptions.html#SVCDIR_SERVER_SOCKET_NAME">SVCDIR_SERVER_SOCKET_NAME</a> </td></tr>
<tr>
<td><code>LEGATO_FRAMEWORK_NICE_LEVEL</code> </td><td><a class="el" href="kconfigOptions.html#SUPERV_NICE_LEVEL">SUPERV_NICE_LEVEL</a> </td></tr>
<tr>
<td><code>SDEF_TO_USE</code> </td><td><a class="el" href="kconfigOptions.html#SDEF">SDEF</a> </td></tr>
<tr>
<td><code>SECSTOREADMIN</code> </td><td><a class="el" href="kconfigOptions.html#ENABLE_SECSTORE_ADMIN">ENABLE_SECSTORE_ADMIN</a> </td></tr>
<tr>
<td><code>SMACK_ATTR_NAME</code> </td><td><a class="el" href="kconfigOptions.html#SMACK_ATTR_NAME">SMACK_ATTR_NAME</a> </td></tr>
<tr>
<td><code>SMACK_ATTR_VALUE</code> </td><td><a class="el" href="kconfigOptions.html#SMACK_ATTR_VALUE">SMACK_ATTR_VALUE</a> </td></tr>
<tr>
<td><code>TEST_COVERAGE</code> </td><td><a class="el" href="kconfigOptions.html#TEST_COVERAGE">TEST_COVERAGE</a> </td></tr>
<tr>
<td><code>TEST_COVERAGE_DIR</code> </td><td><a class="el" href="kconfigOptions.html#TEST_COVERAGE_DIR">TEST_COVERAGE_DIR</a> </td></tr>
</table>
<p>An alternate configuration file can be specified by setting the <code>LEGATO_KCONFIG</code> environment variable to point at the configuration file to use when running the make command. If this is specified then the environment variables will be ignored and no default configuration will be generated. The provided file will be used as the source of all parameters.</p>
<h2><a class="anchor" id="kconfigDescription_Modifying"></a>
Modifying Configuration</h2>
<p>The menu of configuration options may be accessed by running <code>make menuconfig_&lt;target&gt;</code> (note that <code>make menuconfig</code> is equivalent to <code>make menuconfig_localhost</code>). This will open a curses-based menu system to allow configuration editing. See the <a class="el" href="kconfigOptions.html">KConfig Options</a> page for the complete list of available parameters and their meanings.</p>
<dl class="section attention"><dt>Attention</dt><dd>Once the configuration file has been generated, changes to the environment variables which were used to generate it will be ignored. To make further changes to the configuration, use the menuconfig mechanism.</dd></dl>
<p>As an example, the following command would open the menu for the WP76:</p>
<pre class="fragment">make menuconfig_wp76xx
</pre><p>To completely remove all configuration files and build products, run this command:</p>
<pre class="fragment">make distclean
</pre><p>After running this, further make commands will cause the configuration to be regenerated from the environment and defaults.</p>
<h1><a class="anchor" id="kconfigDescription_Products"></a>
What is Produced?</h1>
<p>Once a target configuration file has been produced, either as the default generated during the build, or through the menuconfig process, it will be processed by current and future builds for that target. When building, the configuration will be translated into the following three output files:</p>
<ul>
<li><code>${LEGATO_ROOT}/build/&lt;target&gt;/.config.mk</code></li>
<li><code>${LEGATO_ROOT}/build/&lt;target&gt;/config.sh</code></li>
<li><code>${LEGATO_ROOT}/build/&lt;target&gt;/framework/include/le_config.h</code></li>
</ul>
<p>In each of these, the configuration selections are provided in the appropriate format, with parameter names prefixed with <code>LE_CONFIG_</code>. For example, the <a class="el" href="kconfigOptions.html#ENABLE_IMA">ENABLE_IMA</a> option becomes <code>LE_CONFIG_ENABLE_IMA</code>.</p>
<p>In general, one should not need to use these files directly. Rather, their contents are made available in the build or compilation environment automatically.</p>
<p>The <code>.config.mk</code> file is included in the main Legato Makefile, and exports all of the configured values for use in the build.</p>
<p>The <code>config.sh</code> file exports the same values for use in shell scripts, and can be sourced to obtain all of the set values.</p>
<p>Finally, the <code>le_config.h</code> file is included in <code><a class="el" href="legato_8h.html">legato.h</a></code>, and sets all of the values as preprocessor defines to control compilation of the framework, services, and apps. The <code>le_config.h</code> file also defines <code>LE_VERSION</code> to the current Legato version string, and <code>LE_TARGET</code> to the target name as a string.</p>
<p>In all cases, string and integer values are simply provided as-is, while in the C header boolean values are changed to 0 or 1 (from <code>n</code> or <code>y</code>, respectively).</p>
<h1><a class="anchor" id="kconfigDescription_Experimental"></a>
Experimental Features</h1>
<p>Some Legato features are not yet considered ready for deployment in a production environment. These features may be under active development and subject to change, or not sufficiently tested ("alpha quality") for widespread use. In order to make such features available for feedback from and experimentation by the community, they are included in the configuration but classified as "experimental."</p>
<p>In the KConfig settings, all experimental features are dependent on the <a class="el" href="kconfigOptions.html#EXPERIMENTAL">EXPERIMENTAL</a> option, found under the "General Setup" menu. Enabling this will enable access to the extra experimental features, which may then be turned on and off individually using the appropriate menu items. Experimental KConfig options are denoted with "(EXPERIMENTAL)" in their descriptions.</p>
<dl class="section attention"><dt>Attention</dt><dd>The use of experimental features in a production environment is strongly discouraged.</dd></dl>
<p class="copyright">Copyright (C) Sierra Wireless Inc. </p>
</div></div>
<br clear="left"/>
</div>
</div>
<link href="resources/css/jqtree.css" rel="stylesheet" type="text/css"/>
<script src="resources/js/tree.jquery.js" type="text/javascript"></script>
<script src="resources/js/jquery.cookie.js"></script>
<script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js"></script>
<link href="resources/css/perfect-scrollbar.min.css" rel="stylesheet"/>
<script src="resources/js/perfect-scrollbar.jquery.min.js"></script>
</body>
</html>
